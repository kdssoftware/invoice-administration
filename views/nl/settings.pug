html
    head
        title=title
        link(rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css")
        link(rel="stylesheet" href="/stylesheet.css")
        script(src="https://code.jquery.com/jquery-3.3.1.slim.min.js")
        script(src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js")
        script(src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js")
        script(src="https://cdnjs.cloudflare.com/ajax/libs/feather-icons/4.9.0/feather.min.js")
        script(src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.min.js")
        script(src="https://www.chartjs.org/samples/latest/utils.js")
        script(src="https://unpkg.com/feather-icons")
        script.
            function info() {
                $("#info").toggle();
            };

    body(onpageshow='drawChart(['+totaal+'])')
        header
            nav(class="navbar navbar-dark fixed-top bg-dark flex-md-nowrap p-0 shadow")
                a(class="navbar-brand col-sm-3 col-md-2 mr-0",href="/edit-profile/"+loginHash)=profile.firma
                form(class="form", method="post",action="/zoeken/"+loginHash)
                    input(class="form-control form-control-dark w-100" type="text",name="search",placeholder="zoeken" aria-label="zoeken")
                    button(type="sumbit",style="display:none")
                ul(class="navbar-nav px-3")
                    li(class="nav-item text-nowrap")
                        a(class="nav-link" href="#") Sign out

            div(class="container-fluid")
                div(class ="row")
                    nav(class="col-md-2 d-none d-md-block bg-light sidebar")
                        div(class="sidebar-sticky")
                            ul(class="nav flex-column")
                                li(class="nav-item")
                                    a(class="nav-link active" href="/index/"+loginHash)
                                        span(data-feather="home")
                                        span Home
                                        span(class="sr-only") (current)
                                li(class="nav-item")
                                    a(class="nav-link" href="/edit-profile/"+loginHash)
                                        span(data-feather="user")
                                        span Mijn Profiel
                                li(class="nav-item")
                                    a(class="nav-link" href="/facturen/"+loginHash)
                                        span(data-feather="file")
                                        span Alle facturen
                                li(class="nav-item")
                                    a(class="nav-link" href="/contacten/"+loginHash)
                                        span(data-feather="users")
                                        span Klanten
                                li(class="nav-item")
                                    a(class="nav-link" href="/mat/"+loginHash)
                                        span(data-feather="package")
                                        span Materialen
                                li(class="nav-item")
                                    a(class="nav-link" href="/berekeningen/"+loginHash)
                                        span(data-feather="book")
                                        span Berekeningen
                                li(class="nav-item")
                                    a(class="nav-link" href="/settings/"+loginHash)
                                        span(data-feather="settings")
                                        span Settings
                            h6(class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted")
                                span Bookmarks
                            ul(class="nav flex-column mb-2")
                                li(class="nav-item")
                                    a(class="nav-link",href='https://identity.basecone.com/authentication/login')
                                        span(data-feather="bookmark")
                                        span Basecone
                    main(role="main" class="col-md-9 ml-sm-auto col-lg-10 px-4")
                        h2(class="pt-3") Settings
                        div(class="table-responsive")
                            table(class="table table-striped table-striped")
                                tbody
                                    tr
                                        td
                                            p(class="lead") Verander passwoord
                                            a(href='/pass' + "/" + loginHash,class="button")
                                                button(type="button" class="btn btn-outline-"+settings.thema) Verander passwoord
                                    tr
                                        td
                                            p(class="lead") Verander BTW waarden
                                            p Btw staat op: #{settings.btw}%
                                            a(href='/btw' + "/" + loginHash,class="button",class="btn btn-outline-"+settings.thema) Verander BTW waarden
                                    tr
                                        td
                                            p(class="lead") Thema
                                            div(class="btn-toolbar mb-3" role="toolbar" aria-label="Toolbar with button groups")
                                                div(class="btn-group mr-4" role="group" aria-label="First group")
                                                    a(href='/change-theme/secondary' + "/" + loginHash,class="button")
                                                        if settings.thema == "secondary"
                                                            button(type="button" class="btn btn-outline-secondary") grey
                                                        else
                                                            button(type="button" class="btn btn-secondary") grey
                                                    a(href='/change-theme/dark' + "/" + loginHash,class="button")
                                                        if settings.thema == "dark"
                                                            button(type="button" class="btn btn-outline-dark") dark
                                                        else
                                                            button(type="button" class="btn btn-dark") dark
                                                    a(href='/change-theme/light' + "/" + loginHash,class="button")
                                                        if settings.thema == "light"
                                                            button(type="button" class="btn btn-outline-light") white
                                                        else
                                                            button(type="button" class="btn btn-light") white
                                                    a(href='/change-theme/info' + "/" + loginHash,class="button")
                                                        if settings.thema == "info"
                                                            button(type="button" class="btn btn-outline-info") blue
                                                        else
                                                            button(type="button" class="btn btn-info") blue
                                                    a(href='/change-theme/danger' + "/" + loginHash,class="button")
                                                        if settings.thema == "danger"
                                                            button(type="button" class="btn btn-outline-danger") red
                                                        else
                                                            button(type="button" class="btn btn-danger") red
                                    tr
                                        td
                                            p(class="lead") Language
                                            div(class="btn-group mb-3" role="group" aria-label="Basic example")
                                                a(href="/change-lang/nl/" + loginHash,class="button")
                                                    if settings.lang == "nl"
                                                        button(type="button" class="btn btn-outline-"+settings.thema) Nederlands
                                                    else
                                                        button(type="button" class="btn btn-"+settings.thema) Nederlands
                                                a(href="/change-lang/eng/" + loginHash,class="button")
                                                    if settings.lang == "eng"
                                                        button(type="button" class="btn btn-outline-"+settings.thema) English
                                                    else
                                                        button(type="button" class="btn btn-"+settings.thema) English
                                    tr
                                        td
                                            form(action='/edit-pdf-text/'+loginHash,method='post')
                                                p(class="lead") Text aanpassingen
                                                    button(type="button" class="mb-1 btn-sm btn btn-"+settings.thema, onclick="info()") info
                                                div(class="input-group mb-3")
                                                    div(class="input-group-prepend")
                                                        span(class="input-group-text") Factuur tekst
                                                    textarea(input="text",name="factuurtext",class="form-control" aria-label="With textarea")=settings.factuurtext
                                                div(class="input-group mb-3")
                                                    div(class="input-group-prepend")
                                                        span(class="input-group-text") Creditnota tekst
                                                    textarea(input="text",name="creditnotatext",class="form-control" aria-label="With textarea")=settings.creditnotatext
                                                div(class="input-group mb-3")
                                                    div(class="input-group-prepend")
                                                        span(class="input-group-text") Offerte tekst
                                                    textarea(input="text",name="offertetext",class="form-control" aria-label="With textarea")=settings.offertetext
                                                button(type="submit",class="btn btn-outline-"+settings.oppo) bijwerken
                                                div(class="",id="info",style="display:none")
                                                    p Voor variabelen van de database te gebruiken, typ ze zoals hieronder in de texten:
                                                    samp
                                                        pre
                                                            code &#91;firma&#93;     : firma naam
                                                            code &#91;naam&#93;      : volledige naam
                                                            code &#91;straat&#93;    : straatnaam
                                                            code &#91;nr&#93;        : straatnummer
                                                            code &#91;postcode&#93;  : postcode
                                                            code &#91;plaats&#93;    : plaatsnaam
                                                            code &#91;btw&#93;       : btw nummer
                                                            code &#91;iban&#93;      : Iban nummer
                                                            code &#91;bic&#93;       : Bic nummer
                                                            code &#91;tel&#93;       : Telefoon nummer
                                                            code &#91;bic&#93;       : mail
                                                            code &#91;contact.rekeningnr&#93;: mail van contactpersoon die bij de factuur hoort
                                                            code &#91;factuur.datum&#93;     : Datum van creatie van het document in het programma
                                                            code &#91;factuur.factuurnr&#93; : Nummer van de factuur
                                                            code &#91;factuur.offertenr&#93; : Nummer van de offerte
                                                            code &#91;factuur.creditnr&#93;  : Nummer van de creditnota
                                                            code &#91;factuur.voorschot&#93; : het voorschot bedrag
                                                            code &#91;factuur.totaal&#93;    : het totaal aantal bedrag
                                                            code &#91;datum&#93;    : Volledig datum van vandaag (dd maand yyyy)
                                                            code &#91;datum.d&#93;  : Dag van vandaag in getal (dd)
                                                            code &#91;datum.m&#93;  : Volledige maand van vandaag (maand)
                                                            code &#91;datum.j&#93;  : Volledig jaar van vandaag (yyyy)



    script.
            $(document).ready(function () {
                feather.replace();
            });
            function drawChart(totaal) {
                console.log(totaal);
                var ctx = document.getElementById('myChart').getContext('2d');
                var maand = ["Januari", "Februari", "Maart", "April", "Mei", "Juni", "Juli", "Augustus", "September", "Oktober", "November", "December"];
                var color = Chart.helpers.color;
                var myChart = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: [maand[0], maand[1], maand[2], maand[3], maand[4], maand[5], maand[6], maand[7], maand[8], maand[9], maand[10], maand[11]],
                        datasets: [{
                            label: 'Exlc. btw €',
                            data: [totaal[0], totaal[1], totaal[2], totaal[3], totaal[4], totaal[5], totaal[6], totaal[7], totaal[8], totaal[9], totaal[10], totaal[11]],
                            backgroundColor: color(window.chartColors.red).alpha(1).rgbString(),
                            borderColor: window.chartColors.red,
                            borderWidth: 1
                        }, {
                            label: 'Incl. btw €',
                            data: [totaal[0] * 1.21, totaal[1] * 1.21, totaal[2] * 1.21, totaal[3] * 1.21, totaal[4] * 1.21, totaal[5] * 1.21, totaal[6] * 1.21, totaal[7] * 1.21, totaal[8] * 1.21, totaal[9] * 1.21, totaal[10] * 1.21, totaal[11] * 1.21],
                            backgroundColor: color(window.chartColors.blue).alpha(1).rgbString(),
                            borderColor: window.chartColors.blue,
                            borderWidth: 1
                        }]
                    },
                    options: {
                        scales: {
                            yAxes: [{
                                ticks: {
                                    beginAtZero: true
                                }
                            }]
                        }
                    }
                });
            }
            function changeBetaald(id, contact, loginHash) {
                if (contact === "undefined") {
                    window.location = "/change-betaald2/" + id + "/" + loginHash;
                } else {
                    window.location = "/change-betaald/" + id + "/" + loginHash;
                }
            }
